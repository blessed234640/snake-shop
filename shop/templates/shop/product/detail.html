{% extends "shop/base.html" %} {% load static %} {% block title %} {{
product.name }} - Snake Paradise {% endblock %} {% block content %}
<div class="product-detail">
    <!-- –ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
    <div class="product-gallery">
        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
        <div class="main-image">
            <img
                id="mainProductImage"
                src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'shop/img/no_image.png' %}{% endif %}"
                alt="{{ product.name }}"
            />
        </div>

        <!-- –ú–∏–Ω–∏–∞—Ç—é—Ä—ã –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
        {% if additional_images %}
        <div class="image-thumbnails">
            {% for image in additional_images %}
            <div
                class="thumbnail"
                onclick="changeImage('{{ image.image.url }}', this)"
            >
                <img src="{{ image.image.url }}" alt="{{ product.name }}" />
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <div class="product-info">
        <h1>{{ product.name }}</h1>
        <h2 style="color: var(--text-secondary); margin: 1rem 0">
            üìÅ –ö–∞—Ç–µ–≥–æ—Ä–∏—è:
            <a
                href="{{ product.category.get_absolute_url }}"
                style="color: var(--accent-primary)"
            >
                {{ product.category }}
            </a>
        </h2>

        <div class="price">‚ÇΩ{{ product.price }}</div>

        <form
            action="{% url 'cart:cart_add' product.id %}"
            method="post"
            style="margin: 2.5rem 0"
        >
            <div style="margin-bottom: 1.5rem">{{ cart_product_form }}</div>
            {% csrf_token %}
            <input type="submit" value="üõí –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É" class="button" />
        </form>

        <div class="product-description">
            <h3 style="color: var(--accent-primary); margin-bottom: 1rem">
                üìù –û–ø–∏—Å–∞–Ω–∏–µ
            </h3>
            <div style="color: var(--text-secondary); line-height: 1.8">
                {{ product.description|linebreaks }}
            </div>
        </div>
    </div>
</div>
{% endblock %} {% block domready %}
<script>
    function changeImage(imageUrl, element) {
        // –ú–µ–Ω—è–µ–º –æ—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        const mainImage = document.getElementById("mainProductImage");
        mainImage.src = imageUrl;

        // –ü–ª–∞–≤–Ω–∞—è —Å–º–µ–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        mainImage.style.opacity = "0";
        setTimeout(() => {
            mainImage.style.opacity = "1";
        }, 150);

        // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –º–∏–Ω–∏–∞—Ç—é—Ä
        const thumbnails = document.querySelectorAll(".thumbnail");
        thumbnails.forEach((thumb) => {
            thumb.classList.remove("active");
        });

        // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –º–∏–Ω–∏–∞—Ç—é—Ä–µ
        element.classList.add("active");
    }

    // –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    document.addEventListener("DOMContentLoaded", function () {
        const mainImage = document.getElementById("mainProductImage");
        mainImage.style.transition = "opacity 0.3s ease";
    });
</script>
{% endblock %}
